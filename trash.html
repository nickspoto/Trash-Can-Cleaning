<!DOCTYPE html>
<html lang="en" xml:lang="en">
    <head>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    </head>
	<link rel="icon" type="image/ico" href="favicon.ico">
    <link rel="stylesheet" href="trash.css"/>
    <title>
        Trash Cleaning
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet"
        href=
"https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
	<div id="header"> 
		<img src="dirtyTrash.png" alt="Dirty Trash" id="trash-images">
        <div id="arrow-outline">
            <div id="arrow-opp-right"></div>
            <div id="trash-rect">
                &emsp;&emsp;&emsp;
                &emsp;&emsp;&emsp;&emsp;
                &emsp;&emsp;&emsp;&emsp;
                &emsp;&emsp;&emsp;&emsp;
            </div>
            <!-- To anyone who sees this - sorry but the implementation I wanted only works with empty space.
            Please ignore the smell -->
            <div id="trash-rect">
                TRASH CAN CLEANING
                &emsp;&emsp;
                &emsp;&emsp;&emsp;&emsp;
                &emsp;&emsp;&emsp;&emsp;
                &emsp;&emsp;&emsp;&emsp;
            </div>
            <div id="arrow-right"></div>
        </div>
        <img src="cleanTrash.png" alt="Clean Trash" id="trash-images">
	</div>
    <p id="main-info"> Hello! We are your neighbors, Nick Spoto and Caleb Ludlow, and we are back again offering our trash and recycling
        can cleaning services! You can now sign up through this website. Select your garbage collection service through one
        of the buttons below, and the calendar will highlight its pickup days. After selecting a day you are sure your
        trash can will be empty, please fill out the form with your name, address, email, and trash can information 
        to reserve your slot.
    </p>
    <div id="button-pressed"> No trash service selected. </div>
    <div id="selected-date">No date selected.</div> <!--remove these eventually once form functionality added-->
    <div id="buttons">
        <button class="button1" id="button1">Republic</button>
        <button class="button1" id="button2">American</button>
        <button class="button1" id="button3">Others</button>
    </div>
    <script>
        const div = document.getElementById("button-pressed");
        button1.addEventListener("click", clickFunction);
        button2.addEventListener("click", clickFunction);
        button3.addEventListener("click", clickFunction);
        function clickFunction(){
            if (event.target.id === "button1" || event.target.id === "button2"){
                const pickupDays = ["Sunday and Thursday.", "Monday and Friday."]; //update with the correct days
                const element = document.getElementById(event.target.id);
                document.getElementById("button-pressed").innerHTML = `Your trash service is ` + element.innerHTML + 
                `. Your pickup days are ` + (event.target.id === "button1" ? pickupDays[0] : pickupDays[1]); 
                //sets the div to what you have clicked to confirm
            }
            else if (event.target.id === "button3"){ //deals with others case
                const element = document.getElementById(event.target.id);
                document.getElementById("button-pressed").innerHTML = "Your trash service is some other service. Please select a day you know your trash cans will be empty."; 
            }
        }
    </script>
    <div id="bottom">
        <div id="calendar">
            <div id="calendar-container">
                <div id="calendar-header">
                    <p id="current-month"></p>
                    <div id="navigation">
                        <div id="calendar-prev" class="material-symbols-rounded">chevron_left</div><!--make this visible only if month forward-->
                        <div id="calendar-next" class="material-symbols-rounded">chevron_right</div>
                    </div>
                </div>
                <div id="calendar-body">
                    <ul id="header-weekdays">
                        <li>Sun</li>
                        <li>Mon</li>
                        <li>Tue</li>
                        <li>Wed</li>
                        <li>Thu</li>
                        <li>Fri</li>
                        <li>Sat</li>
                    </ul>
                    <ul id="calendar-days"></ul>
                </div>
            </div>
            <script>
                let date = new Date();
                let selectedDay = null;
                var currMonth = date.getMonth();
                var currYear = date.getFullYear();
                const monthList = ["January", "February", "March", "April", "May", "June", "July", "August",
                                    "September", "October", "November", "December"]
                var monthDays = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
                const ul = document.getElementById("calendar-days");
                const navigation = document.getElementById("navigation");
                navigation.addEventListener("click", navigationClick);
                function navigationClick(){ //changes month on click of the nav buttons - make it update calendar date
                    if (event.target.id === "calendar-prev" && (currMonth != 5 || currYear != 2024)){
                        if (currMonth > 0){
                            currMonth -= 1;
                        }
                        else{
                            currMonth = 11;
                            currYear -= 1;
                        }
                        const backArrow = document.getElementById("calendar-prev");
                        if (currMonth === 5 && currYear === 2024){
                            backArrow.style.visibility = "hidden";
                        }
                    }
                    else if (event.target.id === "calendar-next"){
                        if (currMonth < 11){
                            currMonth += 1;
                        }
                        else{
                            currMonth = 0;
                            currYear += 1;
                        }
                        const backArrow = document.getElementById("calendar-prev");
                        if (backArrow.style.visibility === "hidden"){
                            backArrow.style.visibility = "visible";
                        }
                    }
                    updateDate();
                }
                const weekdays = document.getElementById("calendar-days");
                weekdays.addEventListener("click", dayClick);//clicking calendar days
                function dayClick() {
                    if (event.target.nodeName === "LI") {
                        selectedDay = event.target.innerHTML;
                        document.getElementById("selected-date").innerHTML = "Selected " + monthList[currMonth] + 
                                                                            " " + selectedDay + ", " + currYear + '.';
                    }
                }
                function leapYear(year){
                    var result; 
                    if (currYear % 400 === 0){
                    result = true
                    }
                    else if(currYear % 100 === 0){
                    result = false
                    }
                    else if(currYear % 4 === 0){
                    result= true
                    }
                    else{
                    result= false
                    }
                    return result
                }
                function updateDate(){
                    if (leapYear(currYear)){
                        monthDays[1] = 29;
                    }
                    else {
                        monthDays[1] = 28;
                    }
                    document.getElementById("current-month").innerHTML = monthList[currMonth] + " " + currYear;
                    ul.innerHTML = "";
                    var date = new Date(currYear, currMonth, 1);//get first day of the month
                    var priorDays = date.getDay();
                    for (let i = 1; i < monthDays[currMonth] + 1; i++){
                        const listItem = document.createElement("li");
                        if (priorDays > 0){ //now just make a new array to get the length of the previous month and add previous days
                            priorDays -= 1;
                            i --;
                        }
                        else {
                            listItem.textContent = i;
                        }
                        ul.appendChild(listItem);
                    } 
                }
                if (currMonth === 5 && currYear === 2024){ //don't want people setting dates in the past
                    const backArrow = document.getElementById("calendar-prev");
                    backArrow.style.visibility = "hidden";
                }
                else {
                    document.getElementById("calendar-prev").style.visibility = "visible";
                }
                updateDate();
                //TODO - add functionality to the buttons, add in the days of the previous month and change their colors
                //later - add the form and finish the website! all done - but make sure to add a honey pot to the form
            </script>
        </div>
        <div id="form">
            Here's the form
        </div>
    </div>
    <p id="outro">
        If you have any other questions or concerns, please email us at nickspoto1221@gmail.com
        or calebludlow@gmail.com. <br>
        Thank you!
    </p>
</html>